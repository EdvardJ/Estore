(function(){"use strict";var t={7027:function(t,e,s){var a=s(4220),o=s(9812),r=s(5893);const i={id:"wrapper"},n={class:"navbar"},l={class:"navbar-brand"},c=(0,o._)("strong",null,"eStore",-1),u=(0,o._)("span",{"aria-hidden":"true"},null,-1),d=(0,o._)("span",{"aria-hidden":"true"},null,-1),m=(0,o._)("span",{"aria-hidden":"true"},null,-1),p=[u,d,m],h={class:"navbar-start"},g=(0,o._)("div",{class:"navbar-item"},[(0,o._)("form",{method:"get",action:"/search"},[(0,o._)("div",{class:"field has-addons"},[(0,o._)("div",{class:"control"},[(0,o._)("input",{type:"text",class:"input",placeholder:"Looking for something?",name:"query"})]),(0,o._)("div",{class:"control"},[(0,o._)("button",{class:"button is-success"},[(0,o._)("span",{class:"icon"},[(0,o._)("i",{class:"fas fa-search"})])])])])])],-1),_=(0,o.Uk)("About us"),v={class:"navbar-end"},f={class:"navbar-item"},y={class:"dropdown is-hoverable"},w=(0,o.uE)('<div class="dropdown-trigger"><div class="navbar-item" aria-haspopup="true" aria-controls="dropdown-menu"><span id="cat-tag">Categories:</span><span class="icon is-small"><i class="fas fa-angle-down" aria-hidden="true"></i></span></div></div>',1),b={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},k={class:"dropdown-content"},C=(0,o.Uk)("Hats"),S=(0,o.Uk)("Jackets"),T=(0,o.Uk)("Pants"),q=(0,o.Uk)("Shirts"),P={class:"buttons"},z=(0,o.Uk)("My account"),$=(0,o.Uk)("Log in"),I=(0,o._)("span",{class:"icon"},[(0,o._)("i",{class:"fas fa-shopping-cart"})],-1),L=(0,o._)("div",{class:"lds-dual-ring"},null,-1),x=[L],D={class:"section"},O={class:"footer"},U=(0,o._)("p",{class:"has-text-centered is-dark"},"Copyright (c) 2023",-1),F=(0,o.Uk)("Privacy Policy");function j(t,e,s,a,u,d){const m=(0,o.up)("router-link"),L=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("nav",n,[(0,o._)("div",l,[(0,o.Wm)(m,{to:"/",class:"navbar-item"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o._)("a",{class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar-menu",onClick:e[0]||(e[0]=t=>u.showMobileMenu=!u.showMobileMenu)},p)]),(0,o._)("div",{class:(0,r.C_)(["navbar-menu",{"is-active":u.showMobileMenu}]),id:"navbar-menu"},[(0,o._)("div",h,[g,(0,o.Wm)(m,{to:"/about",class:"navbar-item"},{default:(0,o.w5)((()=>[_])),_:1})]),(0,o._)("div",v,[(0,o._)("div",f,[(0,o._)("div",y,[w,(0,o._)("div",b,[(0,o._)("div",k,[(0,o.Wm)(m,{to:"/hats",class:"navbar-item"},{default:(0,o.w5)((()=>[C])),_:1}),(0,o.Wm)(m,{to:"/jackets",class:"navbar-item"},{default:(0,o.w5)((()=>[S])),_:1}),(0,o.Wm)(m,{to:"/pants",class:"navbar-item"},{default:(0,o.w5)((()=>[T])),_:1}),(0,o.Wm)(m,{to:"/shirts",class:"navbar-item"},{default:(0,o.w5)((()=>[q])),_:1})])])]),(0,o._)("div",P,[t.$store.state.isAuthenticated?((0,o.wg)(),(0,o.j4)(m,{key:0,to:"/my-account",class:"button is-light"},{default:(0,o.w5)((()=>[z])),_:1})):((0,o.wg)(),(0,o.j4)(m,{key:1,to:"/log-in",class:"button is-light"},{default:(0,o.w5)((()=>[$])),_:1})),(0,o.Wm)(m,{to:"/cart",class:"button is-success"},{default:(0,o.w5)((()=>[I,(0,o._)("span",null,"Cart ("+(0,r.zw)(d.cartTotalLength)+")",1)])),_:1})])])])],2)]),(0,o._)("div",{class:(0,r.C_)(["is-loading-bar has-text-centered",{"is-loading":t.$store.state.isLoading}])},x,2),(0,o._)("section",D,[(0,o.Wm)(L)]),(0,o._)("footer",O,[U,(0,o.Wm)(m,{id:"privacy",to:"/privacy"},{default:(0,o.w5)((()=>[F])),_:1})])])}var A=s(6211),H=s.n(A),M={data(){return{showMobileMenu:!1,cart:{items:[]}}},beforeCreate(){this.$store.commit("initializeStore");const t=this.$store.state.cart;H().defaults.headers.common.Authorization=t?"Token "+t:""},mounted(){this.cart=this.$store.state.cart},computed:{cartTotalLength(){let t=0;for(let e=0;e<this.cart.items.length;e++)t+=this.cart.items[e].quantity;return t}}},E=s(8998);const Y=(0,E.Z)(M,[["render",j]]);var W=Y,Z=s(644),N=s(2357),V=(0,N.MT)({state:{cart:{items:[]},isAuthenticated:!1,token:"",isLoading:!1},mutations:{initializeStore(t){localStorage.getItem("cart")?t.cart=JSON.parse(localStorage.getItem("cart")):localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.getItem("token")?(t.token=localStorage.getItem("token"),t.isAuthenticated=!0):(t.token="",t.isAuthenticated=!1)},addToCart(t,e){const s=t.cart.items.filter((t=>t.product.id===e.product.id));s.length?s[0].quantity=parseInt(s[0].quantity)+parseInt(e.quantity):t.cart.items.push(e),localStorage.setItem("cart",JSON.stringify(t.cart))},setIsLoading(t,e){t.isLoading=e},setToken(t,e){t.token=e,t.isAuthenticated=!0},removeToken(t){t.token="",t.isAuthenticated=!1},clearCart(t){t.cart={items:[]},localStorage.setItem("cart",JSON.stringify(t.cart))}},actions:{},modules:{}});const K=t=>((0,o.dD)("data-v-c63c5386"),t=t(),(0,o.Cn)(),t),B=(0,o.uE)('<div class="home" data-v-c63c5386><section class="hero is-medium mb-6 is-dark" data-v-c63c5386><div class="has-text-centered" id="banner" data-v-c63c5386><h1 class="is-size-1" data-v-c63c5386> Welcome to eStore </h1><h2 class="is-size-4" data-v-c63c5386> The best online store ever! </h2></div></section></div>',1),J={class:"columns is-multiline"},Q=K((()=>(0,o._)("div",{class:"column is-12"},[(0,o._)("h3",{class:"is-size-2 has-text-centered"},"Latest products")],-1)));function G(t,e,s,a,r,i){const n=(0,o.up)("ProductBox");return(0,o.wg)(),(0,o.iD)(o.HY,null,[B,(0,o._)("div",J,[Q,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.latestProducts,(t=>((0,o.wg)(),(0,o.j4)(n,{key:t.id,product:t},null,8,["product"])))),128))])],64)}const R={class:"column is-3"},X={class:"box"},tt={class:"image mb-4"},et=["src"],st={class:"is-size-4"},at={class:"is-size-6 has-text-grey"},ot=(0,o.Uk)("View Details");function rt(t,e,s,a,i,n){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",R,[(0,o._)("div",X,[(0,o._)("figure",tt,[(0,o._)("img",{src:s.product.get_thumbnail,class:"center"},null,8,et)]),(0,o._)("h3",st,(0,r.zw)(s.product.name),1),(0,o._)("p",at,(0,r.zw)(s.product.price)+"€",1),(0,o.Wm)(l,{to:s.product.get_absolute_url,class:"button is-dark mt-4"},{default:(0,o.w5)((()=>[ot])),_:1},8,["to"])])])}var it={name:"ProductBox",props:{product:Object}};const nt=(0,E.Z)(it,[["render",rt],["__scopeId","data-v-21c7e667"]]);var lt=nt,ct={name:"Home",data(){return{latestProducts:[]}},components:{ProductBox:lt},mounted(){this.getLatestProducts(),document.title="Home | Estore"},methods:{async getLatestProducts(){this.$store.commit("setIsLoading",!0),await H().get("/api/v1/latest-products/").then((t=>{this.latestProducts=t.data})).catch((t=>{console.log(t)})),this.$store.commit("setIsLoading",!1)}}};const ut=(0,E.Z)(ct,[["render",G],["__scopeId","data-v-c63c5386"]]);var dt=ut;const mt={class:"page-product"},pt={class:"columns is-multiline"},ht={class:"column is-5"},gt={class:"image mb-6"},_t=["src"],vt={class:"column is-5"},ft=(0,o._)("h1",{class:"subtitle"},"Product:",-1),yt={class:"title"},wt=(0,o.Uk)("Description:"),bt=(0,o._)("br",null,null,-1),kt=(0,o._)("strong",null,"Price: ",-1),Ct={class:"field has-addons mt-6"},St={class:"control"},Tt={class:"control"};function qt(t,e,s,i,n,l){return(0,o.wg)(),(0,o.iD)("div",mt,[(0,o._)("div",pt,[(0,o._)("div",ht,[(0,o._)("figure",gt,[(0,o._)("img",{src:n.product.get_image},null,8,_t)])]),(0,o._)("div",vt,[ft,(0,o._)("h1",yt,(0,r.zw)(n.product.name),1),(0,o._)("p",null,[wt,bt,(0,o.Uk)(" "+(0,r.zw)(n.product.description),1)]),(0,o._)("p",null,[kt,(0,o.Uk)("€"+(0,r.zw)(n.product.price),1)]),(0,o._)("div",Ct,[(0,o._)("div",St,[(0,o.wy)((0,o._)("input",{type:"number",class:"input",min:"1","onUpdate:modelValue":e[0]||(e[0]=t=>n.quantity=t)},null,512),[[a.nr,n.quantity]])]),(0,o._)("div",Tt,[(0,o._)("a",{class:"button is-dark",onClick:e[1]||(e[1]=(...t)=>l.addToCart&&l.addToCart(...t))},"Add to cart")])])])])])}var Pt=s(3573),zt={name:"Product",data(){return{product:{},quantity:1}},mounted(){this.getProduct()},methods:{async getProduct(){this.$store.commit("setIsLoading",!0);const t=this.$route.params.category_slug,e=this.$route.params.product_slug;await H().get(`/api/v1/products/${t}/${e}`).then((t=>{this.product=t.data,document.title=this.product.name+" | Estore"})).catch((t=>{console.log(t)})),this.$store.commit("setIsLoading",!1)},addToCart(){(isNaN(this.quantity)||this.quantity<1)&&(this.quantity=1);const t={product:this.product,quantity:this.quantity};this.$store.commit("addToCart",t),(0,Pt.toast)({message:"The product was added to cart",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"})}}};const $t=(0,E.Z)(zt,[["render",qt]]);var It=$t;const Lt={class:"page-category"},xt={class:"columns is-multiline"},Dt={class:"column is-12"},Ot={class:"is-size-2 has-text-centered"};function Ut(t,e,s,a,i,n){const l=(0,o.up)("ProductBox");return(0,o.wg)(),(0,o.iD)("div",Lt,[(0,o._)("div",xt,[(0,o._)("div",Dt,[(0,o._)("h2",Ot,(0,r.zw)(i.category.name),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.category.products,(t=>((0,o.wg)(),(0,o.j4)(l,{key:t.id,product:t},null,8,["product"])))),128))])])}var Ft={name:"Category",components:{ProductBox:lt},data(){return{category:{products:[]}}},mounted(){this.getCategory()},watch:{$route(t,e){"Category"===t.name&&this.getCategory()}},methods:{async getCategory(){const t=this.$route.params.category_slug;this.$store.commit("setIsLoading",!0),H().get(`/api/v1/products/${t}/`).then((t=>{this.category=t.data,document.title=this.category.name+" | Estore"})).catch((t=>{console.log(t),(0,Pt.toast)({message:"Something went wrong. Please try again.",type:"is-danger",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"})})),this.$store.commit("setIsLoading",!1)}}};const jt=(0,E.Z)(Ft,[["render",Ut],["__scopeId","data-v-06ea39fe"]]);var At=jt;const Ht={class:"page-search"},Mt={class:"columns is-multiline"},Et={class:"column is-20"},Yt={class:"is-size-5"};function Wt(t,e,s,a,i,n){const l=(0,o.up)("ProductBox");return(0,o.wg)(),(0,o.iD)("div",Ht,[(0,o._)("div",Mt,[(0,o._)("div",Et,[(0,o._)("h1",Yt,'Search term: "'+(0,r.zw)(i.query)+'"',1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.products,(t=>((0,o.wg)(),(0,o.j4)(l,{key:t.id,product:t},null,8,["product"])))),128))])])])}var Zt={name:"Search",components:{ProductBox:lt},data(){return{products:[],query:""}},mounted(){document.title="Search | Estore";let t=window.location.search.substring(1),e=new URLSearchParams(t);e.get("query")&&(this.query=e.get("query"),this.performSearch())},methods:{async performSearch(){this.$store.commit("setIsLoading",!0),await H().post("/api/v1/products/search/",{query:this.query}).then((t=>{this.products=t.data})).catch((t=>{console.log(t)})),this.$store.commit("setIsLoading",!1)}}};const Nt=(0,E.Z)(Zt,[["render",Wt]]);var Vt=Nt;const Kt={class:"page-cart"},Bt={class:"columns is-multiline"},Jt=(0,o._)("div",{class:"column is-12"},[(0,o._)("h1",{class:"title"},"Cart")],-1),Qt={class:"column is-12 box"},Gt={key:0,class:"table is-fullwidth"},Rt=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Product"),(0,o._)("th",null,"Price"),(0,o._)("th",null,"Quantity"),(0,o._)("th",null,"Total"),(0,o._)("th")])],-1),Xt={key:1},te={class:"column is-12 box"},ee=(0,o._)("h2",{class:"subtitle"},"Summary:",-1),se=(0,o._)("hr",null,null,-1),ae=(0,o.Uk)("Proceed to checkout"),oe=(0,o._)("hr",null,null,-1),re=(0,o._)("h2",{class:"subtitle"},"or",-1);function ie(t,e,s,a,i,n){const l=(0,o.up)("CartItem"),c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",Kt,[(0,o._)("div",Bt,[Jt,(0,o._)("div",Qt,[n.cartTotalLength?((0,o.wg)(),(0,o.iD)("table",Gt,[Rt,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.cart.items,(t=>((0,o.wg)(),(0,o.j4)(l,{key:t.product.id,initialItem:t,onRemoveFromCart:n.removeFromCart},null,8,["initialItem","onRemoveFromCart"])))),128))])])):((0,o.wg)(),(0,o.iD)("p",Xt,"Cart is empty..."))]),(0,o._)("div",te,[ee,(0,o._)("strong",null,"$"+(0,r.zw)(n.cartTotalPrice.toFixed(2)),1),(0,o.Uk)(", "+(0,r.zw)(n.cartTotalLength)+" items ",1),se,(0,o.Wm)(c,{to:"/cart/checkout",class:"button is-dark"},{default:(0,o.w5)((()=>[ae])),_:1}),oe,re,(0,o._)("button",{class:"button is-danger",onClick:e[0]||(e[0]=(...t)=>n.clearCart&&n.clearCart(...t))},"Clear cart")])])])}function ne(t,e,s,a,i,n){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("tr",null,[(0,o._)("td",null,[(0,o.Wm)(l,{to:i.item.product.get_absolute_url},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(i.item.product.name),1)])),_:1},8,["to"])]),(0,o._)("td",null,"$"+(0,r.zw)(i.item.product.price),1),(0,o._)("td",null,[(0,o._)("a",{onClick:e[0]||(e[0]=t=>n.decrementQuantity(i.item))},"-"),(0,o.Uk)(" "+(0,r.zw)(i.item.quantity)+" ",1),(0,o._)("a",{onClick:e[1]||(e[1]=t=>n.incrementQuantity(i.item))},"+")]),(0,o._)("td",null,"$"+(0,r.zw)(n.getItemTotal(i.item).toFixed(2)),1),(0,o._)("td",null,[(0,o._)("button",{class:"delete",onClick:e[2]||(e[2]=t=>n.removeFromCart(i.item))})])])}var le={name:"CartItem",props:{initialItem:Object},data(){return{item:this.initialItem}},methods:{getItemTotal(t){return t.quantity*t.product.price},decrementQuantity(t){t.quantity-=1,0===t.quantity&&this.$emit("removeFromCart",t),this.updateCart()},incrementQuantity(t){t.quantity+=1,this.updateCart()},updateCart(){localStorage.setItem("cart",JSON.stringify(this.$store.state.cart))},removeFromCart(t){this.$emit("removeFromCart",t),this.updateCart()}}};const ce=(0,E.Z)(le,[["render",ne]]);var ue=ce,de={name:"Cart",components:{CartItem:ue},data(){return{cart:{items:[]}}},mounted(){this.cart=this.$store.state.cart},methods:{removeFromCart(t){this.cart.items=this.cart.items.filter((e=>e.product.id!==t.product.id))},clearCart(t){t.cart={items:[]},localStorage.setItem("cart",JSON.stringify(t.cart)),location.reload()}},computed:{cartTotalLength(){return this.cart.items.reduce(((t,e)=>t+e.quantity),0)},cartTotalPrice(){return this.cart.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)}}};const me=(0,E.Z)(de,[["render",ie]]);var pe=me;const he={class:"page-sign-up"},ge={class:"columns"},_e={class:"column is-4 is-offset-4"},ve=(0,o._)("h1",{class:"title"},"Sign up",-1),fe={class:"field"},ye=(0,o._)("label",null,"Username",-1),we={class:"control"},be={class:"field"},ke=(0,o._)("label",null,"Password",-1),Ce={class:"control"},Se={class:"field"},Te=(0,o._)("label",null,"Repeat password",-1),qe={class:"control"},Pe={key:0,class:"notification is-danger"},ze=(0,o._)("div",{class:"field"},[(0,o._)("div",{class:"control"},[(0,o._)("button",{class:"button is-dark"},"Sign up")])],-1),$e=(0,o._)("hr",null,null,-1),Ie=(0,o.Uk)(" Or "),Le=(0,o.Uk)("click here"),xe=(0,o.Uk)(" to log in! ");function De(t,e,s,i,n,l){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",he,[(0,o._)("div",ge,[(0,o._)("div",_e,[ve,(0,o._)("form",{onSubmit:e[3]||(e[3]=(0,a.iM)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"]))},[(0,o._)("div",fe,[ye,(0,o._)("div",we,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=t=>n.username=t)},null,512),[[a.nr,n.username]])])]),(0,o._)("div",be,[ke,(0,o._)("div",Ce,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t)},null,512),[[a.nr,n.password]])])]),(0,o._)("div",Se,[Te,(0,o._)("div",qe,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[2]||(e[2]=t=>n.password2=t)},null,512),[[a.nr,n.password2]])])]),n.errors.length?((0,o.wg)(),(0,o.iD)("div",Pe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.errors,(t=>((0,o.wg)(),(0,o.iD)("p",{key:t},(0,r.zw)(t),1)))),128))])):(0,o.kq)("",!0),ze,$e,Ie,(0,o.Wm)(c,{to:"/log-in"},{default:(0,o.w5)((()=>[Le])),_:1}),xe],32)])])])}var Oe={name:"SignUp",data(){return{username:"",password:"",password2:"",errors:[]}},methods:{submitForm(){if(this.errors=[],""===this.username&&this.errors.push("The username is missing"),""===this.password&&this.errors.push("The password is too short"),this.password!==this.password2&&this.errors.push("The passwords doesn't match"),!this.errors.length){const t={username:this.username,password:this.password};H().post("/api/v1/users/",t).then((t=>{(0,Pt.toast)({message:"Account created, please log in!",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"}),this.$router.push("/log-in")})).catch((t=>{if(t.response){for(const e in t.response.data)this.errors.push(`${e}: ${t.response.data[e]}`);console.log(JSON.stringify(t.response.data))}else t.message&&(this.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(t)))}))}}}};const Ue=(0,E.Z)(Oe,[["render",De]]);var Fe=Ue;const je={class:"page-log-in"},Ae={class:"columns"},He={class:"column is-4 is-offset-4"},Me=(0,o._)("h1",{class:"title"},"Log in",-1),Ee={class:"field"},Ye=(0,o._)("label",null,"Username",-1),We={class:"control"},Ze={class:"field"},Ne=(0,o._)("label",null,"Password",-1),Ve={class:"control"},Ke={key:0,class:"notification is-danger"},Be=(0,o._)("div",{class:"field"},[(0,o._)("div",{class:"control"},[(0,o._)("button",{class:"button is-dark"},"Log in")])],-1),Je=(0,o._)("hr",null,null,-1),Qe=(0,o.Uk)(" Or "),Ge=(0,o.Uk)("click here"),Re=(0,o.Uk)(" to sign up! ");function Xe(t,e,s,i,n,l){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",je,[(0,o._)("div",Ae,[(0,o._)("div",He,[Me,(0,o._)("form",{onSubmit:e[2]||(e[2]=(0,a.iM)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"]))},[(0,o._)("div",Ee,[Ye,(0,o._)("div",We,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=t=>n.username=t)},null,512),[[a.nr,n.username]])])]),(0,o._)("div",Ze,[Ne,(0,o._)("div",Ve,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t)},null,512),[[a.nr,n.password]])])]),n.errors.length?((0,o.wg)(),(0,o.iD)("div",Ke,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.errors,(t=>((0,o.wg)(),(0,o.iD)("p",{key:t},(0,r.zw)(t),1)))),128))])):(0,o.kq)("",!0),Be,Je,Qe,(0,o.Wm)(c,{to:"/sign-up"},{default:(0,o.w5)((()=>[Ge])),_:1}),Re],32)])])])}var ts={name:"LogIn",data(){return{username:"",password:"",errors:[]}},mounted(){document.title="Log in | Estore"},methods:{async submitForm(){H().defaults.headers.common.Authorization="",localStorage.removeItem("token");const t={username:this.username,password:this.password};await H().post("/api/v1/token/login/",t).then((t=>{const e=t.data.auth_token;this.$store.commit("setToken",e),H().defaults.headers.common.Authorization="Token "+e,localStorage.setItem("token",e);const s=this.$route.query.to||"/cart";this.$router.push(s)})).catch((t=>{if(t.response)for(const e in t.response.data)this.errors.push(`${e}: ${t.response.data[e]}`);else this.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(t))}))}}};const es=(0,E.Z)(ts,[["render",Xe]]);var ss=es;const as=t=>((0,o.dD)("data-v-6987d4b6"),t=t(),(0,o.Cn)(),t),os={class:"columns is-multiline"},rs=as((()=>(0,o._)("div",{class:"column is-12"},[(0,o._)("h1",{class:"title"},"My account")],-1))),is={class:"column is-12"},ns=as((()=>(0,o._)("hr",null,null,-1))),ls={class:"column is-12"},cs=as((()=>(0,o._)("h2",{class:"subtitle"},"My Orders:",-1)));function us(t,e,s,a,r,i){const n=(0,o.up)("OrderSummary");return(0,o.wg)(),(0,o.iD)("div",os,[rs,(0,o._)("div",is,[(0,o._)("button",{onClick:e[0]||(e[0]=t=>i.logout()),class:"button is-danger"},"Log out")]),ns,(0,o._)("div",ls,[cs,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.orders,(t=>((0,o.wg)(),(0,o.j4)(n,{key:t.id,order:t},null,8,["order"])))),128))])])}const ds={class:"box mb-4"},ms={class:"is-size-4 mb-6"},ps=(0,o._)("h4",{class:"is-size-5"},"Products",-1),hs={class:"table is-fullwidth"},gs=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Product"),(0,o._)("th",null,"Price"),(0,o._)("th",null,"Quantity"),(0,o._)("th",null,"Total")])],-1);function _s(t,e,s,a,i,n){return(0,o.wg)(),(0,o.iD)("div",ds,[(0,o._)("h3",ms,"Order #"+(0,r.zw)(s.order.id),1),ps,(0,o._)("table",hs,[gs,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.order.items,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.product.id},[(0,o._)("td",null,(0,r.zw)(t.product.name),1),(0,o._)("td",null,"$"+(0,r.zw)(t.product.price),1),(0,o._)("td",null,(0,r.zw)(t.quantity),1),(0,o._)("td",null,"$"+(0,r.zw)(n.getItemTotal(t).toFixed(2)),1)])))),128))])])])}var vs={name:"OrderSummary",props:{order:Object},methods:{getItemTotal(t){return t.quantity*t.product.price},orderTotalLength(t){return t.items.reduce(((t,e)=>t+e.quantity),0)}}};const fs=(0,E.Z)(vs,[["render",_s]]);var ys=fs,ws={name:"MyAccount",components:{OrderSummary:ys},data(){return{orders:[]}},mounted(){document.title="My account | eStore",this.getMyOrders()},methods:{logout(){H().defaults.headers.common.Authorization="",localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userid"),this.$store.commit("removeToken"),this.$router.push("/")},async getMyOrders(){this.$store.commit("setIsLoading",!0),await H().get("/api/v1/orders/").then((t=>{this.orders=t.data})).catch((t=>{console.log(t)})),this.$store.commit("setIsLoading",!1)}}};const bs=(0,E.Z)(ws,[["render",us],["__scopeId","data-v-6987d4b6"]]);var ks=bs;const Cs={class:"page-checkout"},Ss={class:"columns is-multiline"},Ts=(0,o._)("div",{class:"column is-12"},[(0,o._)("h1",{class:"title"},"Checkout")],-1),qs={class:"column is-12 box"},Ps={class:"table is-fullwidth"},zs=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Product"),(0,o._)("th",null,"Price"),(0,o._)("th",null,"Quantity"),(0,o._)("th",null,"Total")])],-1),$s=(0,o._)("td",{colspan:"2"},"Total",-1),Is={class:"column is-12 box"},Ls=(0,o._)("h2",{class:"subtitle"},"Shipping details",-1),xs=(0,o._)("p",{class:"has-text-grey mb-4"},"* All fields are required",-1),Ds={class:"columns is-multiline"},Os={class:"column is-6"},Us={class:"field"},Fs=(0,o._)("label",null,"First name*",-1),js={class:"control"},As={class:"field"},Hs=(0,o._)("label",null,"Last name*",-1),Ms={class:"control"},Es={class:"field"},Ys=(0,o._)("label",null,"E-mail*",-1),Ws={class:"control"},Zs={class:"field"},Ns=(0,o._)("label",null,"Phone*",-1),Vs={class:"control"},Ks={class:"column is-6"},Bs={class:"field"},Js=(0,o._)("label",null,"Address*",-1),Qs={class:"control"},Gs={class:"field"},Rs=(0,o._)("label",null,"Zip code*",-1),Xs={class:"control"},ta={class:"field"},ea=(0,o._)("label",null,"Place*",-1),sa={class:"control"},aa={key:0,class:"notification is-danger mt-4"},oa=(0,o._)("hr",null,null,-1),ra=(0,o._)("div",{id:"card-element",class:"mb-5"},null,-1),ia=(0,o._)("hr",null,null,-1);function na(t,e,s,i,n,l){return(0,o.wg)(),(0,o.iD)("div",Cs,[(0,o._)("div",Ss,[Ts,(0,o._)("div",qs,[(0,o._)("table",Ps,[zs,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.cart.items,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.product.id},[(0,o._)("td",null,(0,r.zw)(t.product.name),1),(0,o._)("td",null,"$"+(0,r.zw)(t.product.price),1),(0,o._)("td",null,(0,r.zw)(t.quantity),1),(0,o._)("td",null,"$"+(0,r.zw)(l.getItemTotal(t).toFixed(2)),1)])))),128))]),(0,o._)("tfoot",null,[(0,o._)("tr",null,[$s,(0,o._)("td",null,(0,r.zw)(l.cartTotalLength),1),(0,o._)("td",null,"$"+(0,r.zw)(l.cartTotalPrice.toFixed(2)),1)])])])]),(0,o._)("div",Is,[Ls,xs,(0,o._)("div",Ds,[(0,o._)("div",Os,[(0,o._)("div",Us,[Fs,(0,o._)("div",js,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=t=>n.first_name=t)},null,512),[[a.nr,n.first_name]])])]),(0,o._)("div",As,[Hs,(0,o._)("div",Ms,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=t=>n.last_name=t)},null,512),[[a.nr,n.last_name]])])]),(0,o._)("div",Es,[Ys,(0,o._)("div",Ws,[(0,o.wy)((0,o._)("input",{type:"email",class:"input","onUpdate:modelValue":e[2]||(e[2]=t=>n.email=t)},null,512),[[a.nr,n.email]])])]),(0,o._)("div",Zs,[Ns,(0,o._)("div",Vs,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[3]||(e[3]=t=>n.phone=t)},null,512),[[a.nr,n.phone]])])])]),(0,o._)("div",Ks,[(0,o._)("div",Bs,[Js,(0,o._)("div",Qs,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[4]||(e[4]=t=>n.address=t)},null,512),[[a.nr,n.address]])])]),(0,o._)("div",Gs,[Rs,(0,o._)("div",Xs,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[5]||(e[5]=t=>n.zipcode=t)},null,512),[[a.nr,n.zipcode]])])]),(0,o._)("div",ta,[ea,(0,o._)("div",sa,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[6]||(e[6]=t=>n.place=t)},null,512),[[a.nr,n.place]])])])])]),n.errors.length?((0,o.wg)(),(0,o.iD)("div",aa,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.errors,(t=>((0,o.wg)(),(0,o.iD)("p",{key:t},(0,r.zw)(t),1)))),128))])):(0,o.kq)("",!0),oa,ra,l.cartTotalLength?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[ia,(0,o._)("button",{class:"button is-dark",onClick:e[7]||(e[7]=(...t)=>l.submitForm&&l.submitForm(...t))},"Pay with Stripe")],64)):(0,o.kq)("",!0)])])])}var la={name:"Checkout",data(){return{cart:{items:[]},stripe:{},card:{},first_name:"",last_name:"",email:"",phone:"",address:"",zipcode:"",place:"",errors:[]}},mounted(){if(document.title="Checkout | Estore",this.cart=this.$store.state.cart,this.cartTotalLength>0){this.stripe=Stripe("pk_test_51MKQkGEYaBWOwaBwYpl7eGD8b2G1Xfo8d1msfzfuxlDGEpgD2WfGBqiB4oo8u1851HUKPNVUYOdxsjpamYJ2POKO003Ypiwd6Z");const t=this.stripe.elements();this.card=t.create("card",{hidePostalCode:!0}),this.card.mount("#card-element")}},methods:{getItemTotal(t){return t.quantity*t.product.price},submitForm(){this.errors=[],""===this.first_name&&this.errors.push("The first name field is missing!"),""===this.last_name&&this.errors.push("The last name field is missing!"),""===this.email&&this.errors.push("The email field is missing!"),""===this.phone&&this.errors.push("The phone field is missing!"),""===this.address&&this.errors.push("The address field is missing!"),""===this.zipcode&&this.errors.push("The zip code field is missing!"),""===this.place&&this.errors.push("The place field is missing!"),this.errors.length||(this.$store.commit("setIsLoading",!0),this.stripe.createToken(this.card).then((t=>{t.error?(this.$store.commit("setIsLoading",!1),this.errors.push("Something went wrong with Stripe. Please try again"),console.log(t.error.message)):this.stripeTokenHandler(t.token)})))},async stripeTokenHandler(t){const e=[];for(let a=0;a<this.cart.items.length;a++){const t=this.cart.items[a],s={product:t.product.id,quantity:t.quantity,price:t.product.price*t.quantity};e.push(s)}const s={first_name:this.first_name,last_name:this.last_name,email:this.email,address:this.address,zipcode:this.zipcode,place:this.place,phone:this.phone,items:e,stripe_token:t.id};await H().post("/api/v1/checkout/",s).then((t=>{this.$store.commit("clearCart"),this.$router.push("/cart/success")})).catch((t=>{this.errors.push("Something went wrong. Please try again"),console.log(t)})),this.$store.commit("setIsLoading",!1)}},computed:{cartTotalLength(){return this.cart.items.reduce(((t,e)=>t+e.quantity),0)},cartTotalPrice(){return this.cart.items.reduce(((t,e)=>t+e.product.price*e.quantity),0)}}};const ca=(0,E.Z)(la,[["render",na]]);var ua=ca;const da={class:"page-success"},ma=(0,o._)("div",{class:"columns is-multiline"},[(0,o._)("div",{class:"column is-12"},[(0,o._)("h1",{class:"title"},"Thank you"),(0,o._)("p",null,"Your order will be processed within 48 hours")])],-1),pa=[ma];function ha(t,e,s,a,r,i){return(0,o.wg)(),(0,o.iD)("div",da,pa)}var ga={name:"Success",mounted(){document.title="Success | Estore"}};const _a=(0,E.Z)(ga,[["render",ha]]);var va=_a;const fa={id:"privacy"},ya=(0,o._)("h1",null,"Privacy policies",-1),wa=(0,o._)("br",null,null,-1),ba=(0,o._)("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ab debitis eius ea, eos aliquid necessitatibus asperiores ipsum sit reprehenderit! Deleniti tenetur perferendis voluptate doloremque nostrum consectetur non inventore in sed.",-1),ka=(0,o._)("br",null,null,-1),Ca=(0,o._)("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic, nesciunt? Quae et eius, ipsam numquam officia ipsa illum asperiores adipisci dolore doloribus, provident ratione corporis deserunt exercitationem itaque debitis. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Consequuntur illum laboriosam cumque porro, a saepe maxime unde expedita quibusdam modi culpa, voluptas aspernatur, beatae mollitia! Sint culpa nulla nam sunt.",-1),Sa=[ya,wa,ba,ka,Ca];function Ta(t,e){return(0,o.wg)(),(0,o.iD)("div",fa,Sa)}const qa={},Pa=(0,E.Z)(qa,[["render",Ta]]);var za=Pa;const $a=[{path:"/",name:"Home",component:dt},{path:"/about",name:"About",component:()=>s.e(443).then(s.bind(s,7675))},{path:"/sign-up",name:"SignUp",component:Fe},{path:"/log-in",name:"LogIn",component:ss},{path:"/my-account",name:"MyAccount",component:ks,meta:{requireLogin:!0}},{path:"/search",name:"Search",component:Vt},{path:"/cart",name:"Cart",component:pe},{path:"/cart/checkout",name:"Checkout",component:ua,meta:{requireLogin:!0}},{path:"/cart/success",name:"Success",component:va},{path:"/:category_slug/:product_slug",name:"Product",component:It},{path:"/:category_slug",name:"Category",component:At},{path:"/privacy",name:"Privacy",component:za}],Ia=(0,Z.p7)({history:(0,Z.PO)("/"),routes:$a});Ia.beforeEach(((t,e,s)=>{t.matched.some((t=>t.meta.requireLogin))&&!V.state.isAuthenticated?s({name:"LogIn",query:{to:t.path}}):s()}));var La=Ia;H().defaults.baseURL="https://myestore.info",(0,a.ri)(W).use(V).use(La,H()).mount("#app")}},e={};function s(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,o,r){if(!a){var i=1/0;for(u=0;u<t.length;u++){a=t[u][0],o=t[u][1],r=t[u][2];for(var n=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(n=!1,r<i&&(i=r));if(n){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[a,o,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,a){return s.f[a](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/about.7c371c63.js"}}(),function(){s.miniCssF=function(t){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="estore_vue:";s.l=function(a,o,r,i){if(t[a])t[a].push(o);else{var n,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==e+r){n=d;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",e+r),n.src=a),t[a]=[o];var m=function(e,s){n.onerror=n.onload=null,clearTimeout(p);var o=t[a];if(delete t[a],n.parentNode&&n.parentNode.removeChild(n),o&&o.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={143:0};s.f.j=function(e,a){var o=s.o(t,e)?t[e]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise((function(s,a){o=t[e]=[s,a]}));a.push(o[2]=r);var i=s.p+s.u(e),n=new Error,l=function(a){if(s.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;n.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",n.name="ChunkLoadError",n.type=r,n.request=i,o[1](n)}};s.l(i,l,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,r,i=a[0],n=a[1],l=a[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(l)var u=l(s)}for(e&&e(a);c<i.length;c++)r=i[c],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(u)},a=self["webpackChunkestore_vue"]=self["webpackChunkestore_vue"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(7027)}));a=s.O(a)})();
//# sourceMappingURL=app.df577bc7.js.map